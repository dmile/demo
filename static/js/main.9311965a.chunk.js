(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(e,t,n){e.exports=n(4)},,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(1);n(5);"createImageBitmap"in window||(window.createImageBitmap=function(){var e=Object(o.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var r;if(t instanceof Blob)r=URL.createObjectURL(t);else{if(!(t instanceof ImageData))throw new Error("createImageBitmap does not handle the provided image source type");var a=document.createElement("canvas"),o=a.getContext("2d");a.width=t.width,a.height=t.height,o.putImageData(t,0,0),r=a.toDataURL()}var c=document.createElement("img");c.addEventListener("load",function(){e(this)}),c.src=r}));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=320,i=240;function s(){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(a.a.mark(function e(){var t,n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.enumerateDevices();case 2:return t=e.sent,n=t.filter(function(e){return"videoinput"===e.kind}),r=n[0],console.log(n),console.log("Video device selected: ".concat(r.deviceId)),e.abrupt("return",r);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function p(e){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={video:{deviceId:{exact:t.deviceId},width:{max:c},height:{max:i}}},e.next=3,navigator.mediaDevices.getUserMedia(n);case 3:return r=e.sent,console.log("Video stream opened: ".concat(r.id)),e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function f(e){var t=document.createElement("video");return document.body.appendChild(t),t.width=c,t.height=i,t.srcObject=e,t.onloadedmetadata=function(){t.play(),console.log("Video playing")},t}function w(){var e=document.createElement("canvas");return document.body.appendChild(e),e.width=c,e.height=i,e}function h(e){var t=e.getVideoTracks()[0];return new ImageCapture(t)}var l=new Blob(["Tiny content"],{type:"image/png"});function m(e,t){return v.apply(this,arguments)}function v(){return(v=Object(o.a)(a.a.mark(function e(t,n){var r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.takePhoto();case 2:r=e.sent,window.tmp=r,t.send(l);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function g(e){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",createImageBitmap(window.tmp));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){var e=Object(o.a)(a.a.mark(function e(){var t,n,r,u,d,l;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return t=e.sent,e.next=5,p(t);case 5:n=e.sent,r=h(n),f(n),u=w().getContext("2d"),d="https:"===window.location.protocol?"wss":"ws",(l=new WebSocket("".concat(d,"://demos.kaazing.com/echo"))).binaryType="blob",l.onopen=Object(o.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Web socked opened"),e.next=3,m(l,r);case 3:case"end":return e.stop()}},e)})),l.onmessage=function(){var e=Object(o.a)(a.a.mark(function e(t){var n,o;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,e.next=3,g(n);case 3:return o=e.sent,u.drawImage(o,0,0,c,i),e.next=7,m(l,r);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),l.onclose=function(){console.log("Web socked closed")};case 15:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[2,1,2]]]);
//# sourceMappingURL=main.9311965a.chunk.js.map